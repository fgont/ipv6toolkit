name: Build test

on:
  push:
    branches:
    - '**'
  pull_request:
    - '**'

jobs:
  UbuntuLatest:
    name: Build on Ubuntu-latest
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Install libpcap-dev
      run: sudo apt install -y libpcap-dev
    - name: make
      run: make

  Ubuntu2204:
    name: Build on Ubuntu 22.04
    runs-on: ubuntu-22.04

    steps:
    - uses: actions/checkout@v3
    - name: Install libpcap-dev
      run: sudo apt install -y libpcap-dev
    - name: make
      run: make

  Ubuntu2004:
    name: Build on Ubuntu 20.04
    runs-on: ubuntu-20.04

    steps:
    - uses: actions/checkout@v3
    - name: Install libpcap-dev
      run: sudo apt install -y libpcap-dev
    - name: make
      run: make

  MacOSLatest:
    name: Build MacOS-latest
    runs-on: macos-latest

    steps:
    - uses: actions/checkout@v3
    - name: Install libpcap
      run: |
        brew update
        brew install libpcap
    - name: make
      run: make
  
  MacOS14:
    name: Build MacOS 14
    runs-on: macos-14

    steps:
    - uses: actions/checkout@v3
    - name: Install libpcap
      run: |
        brew update
        brew install libpcap
    - name: make
      run: make
    
MacOS13:
    name: Build MacOS 13
    runs-on: macos-13

    steps:
    - uses: actions/checkout@v3
    - name: Install libpcap
      run: |
        brew update
        brew install libpcap
    - name: make
      run: make
  
MacOS12:
    name: Build MacOS Monterey 12
    runs-on: macos-12

    steps:
    - uses: actions/checkout@v3
    - name: Install libpcap
      run: |
        brew update
        brew install libpcap
    - name: make
      run: make